<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>
    <!-- Herencia del formulario de liquidación -->
    <record model="ir.ui.view" id="view_hr_payslip_form_chile">
      <field name="name">hr.payslip.form.chile</field>
      <field name="model">hr.payslip</field>
      <!-- Si este ID no existe en tu DB, usa: hr_payroll.hr_payslip_view_form -->
      <field name="inherit_id" ref="hr_payroll.view_hr_payslip_form"/>
      <field name="arch" type="xml">

        <!-- poner en el DOM los campos usados en el domain -->
        <xpath expr="//sheet" position="inside">
          <field name="year_domain" invisible="0"/>
          <field name="month_domain" invisible="0"/>
        </xpath>

        <!-- Insertar indicadores y un credit_note invisible para no romper modifiers nativos -->
        <xpath expr="//field[@name='paid']" position="after">
          <field name="credit_note" invisible="1"/>
          <field name="indicadores_id" required="1"/>
        </xpath>

        <!-- Reemplazar credit_note visible por tus campos de movimiento -->
        <xpath expr="//field[@name='credit_note']" position="replace">
          <field name="movimientos_personal" string="Código Movimiento"/>
          <field name="date_start_mp" string="Inicio MP" invisible="movimientos_personal == '0'"/>
          <field name="date_end_mp"   string="Fin MP"    invisible="movimientos_personal == '0'"/>
        </xpath>
      </field>
    </record>

    <!-- Herencia del tree para líneas de la liquidación -->
    <record id="view_hr_payslip_line_tree_chile" model="ir.ui.view">
      <field name="name">hr.payslip.line.tree.chile</field>
      <field name="model">hr.payslip.line</field>
      <field name="inherit_id" ref="hr_payroll.view_hr_payslip_line_tree"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='rate']" position="replace">
          <field name="rate" invisible="1"/>
        </xpath>
      </field>
    </record>
  </data>
</odoo>
